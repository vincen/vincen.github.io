---
layout: post
title: PostgreSQL all in one
categories: database
tags: postgresql
---
# 比较

1、 [why favor postgresql over mariadb mysql](https://www.cybertec-postgresql.com/en/why-favor-postgresql-over-mariadb-mysql/) （[中文翻译](https://blog.csdn.net/qiansg123/article/details/80131429)）

# 使用

初始化（用 brew 安装，已经初始化好了默认库）

```shell
initdb /usr/local/var/postgres
```

创建用户，这一步必须做，否则会报：`role "postgres" does not exist`

```shell
/usr/local/opt/postgres/bin/createuser -s postgres
```

login/sign out from command line tool

```shell
psql -U root -d postgres -h 127.0.0.1
\q (or ctrl + D)
```

create user, database and grant all privileges

```sql
create user username with password 'password';
create database dbname owner username;
grant all privileges on database dbname to username;
```

export, import database

```shell
pg_dump -h localhost -d projection -U hiway > projection.sql
pg_dump -h localhost -d projection -U hiway < projection.sql
```

listen remote connections

```properties
# update file postgresql.conf
listen_addresses = '*'
```

add connection method

```properties
# add a remote user information in pg_hba.conf
# for example:
host	all		postgres	192.168.1.58/32		trust
```

query postgresql variables

```sql
show shared_buffers;
show all;
```

# 特殊

在 Pg 中，`::`是指将前面的内容强制转换为`::` 后面所指定的数据类型，以满足一些查询或是函数对数据类型的要求。

