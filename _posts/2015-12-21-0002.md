---
layout: post
title: git all in one
categories: utilities
tags: git
---
## git常用命令

| command                                  | explaination                             |
| ---------------------------------------- | ---------------------------------------- |
| git init                                 | 将当前文件夹初始化成git本地仓库                        |
| git add readme.txt                       | 把文件从工作区添加到暂存区                            |
| git commit -m “提交说明”                     | 把文件从暂存区添加到本地仓库                           |
| git status                               | 查看当前目录中文件的状态                             |
| git diff readme.txt                      | 显示本地仓库的文件，与当前文件的对比                       |
| git log                                  | 显示从最近到最远的提交日志                            |
| git log --pretty=oneline                 | git log输出信息的简化版                          |
| git reset --hard HEAD^                   | 回滚到上一个版本                                 |
| git reset --hard 328164                  | 回滚到特定commit_id的版本                        |
| git reset HEAD readme.txt                | 把暂存区的修改回退到工作区                            |
| git reflog                               | 查看命令历史                                   |
| git checkout -- readme.txt               | 把readme.txt文件在工作区的修改全部撤销，这里有两种情况：一种是readme.txt自修改后还没有被放到暂存区，现在，撤销修改就回到和版本库一模一样的状态；一种是readme.txt已经添加到暂存区后，又作了修改，现在，撤销修改就回到添加到暂存区后的状态。 |
| git rm readme.txt                        | 从版本库中删除文件                                |
| git remote add origin git@github.com:vincen/helloworld4.git | 将本地仓库关联远程库                               |
| git push -u origin master                | 第一次推送master分支的所有内容                       |
| git push origin master                   | 将本地库推送到远程库                               |
| git clone github.com/helloworld4.git     | 从远程地址复制库到本地                              |
| git branch                               | 查看分支，带星的为当前分支                            |
| git branch <name>                        | 创建分支                                     |
| git checkout <name>                      | 切换分支                                     |
| git checkout -b <name>                   | 创建+切换分支                                  |
| git merge <name>                         | 合并某分支到当前分支                               |
| git merge --on-ff -m "注释" <name>         | 合并某分支到当前分支，强制禁用Fast forward 模式，这样就能从分支历史上看到分支信息。 |
| git branch -d <name>                     | 删除分支                                     |
| git branch -a                            | 列出所有分支                                   |
| git stash                                | 隐藏当前工作空间                                 |
| git stash list                           | 显示隐藏的工作空间列表                              |
| git stash apply stash@{0}                | 恢复，但是stash内容并不删除                         |
| git stash drop                           | 删除stash内容                                |
| git stash pop                            | 恢复的同时把stash内容也删了                         |


## git 常用操作
开发过程中有三个分支：

| version  | description           |
| -------- | --------------------- |
| master   | 主版本                   |
| develper | 开发与测试的版本，待稳定后，会合并到主版本 |
| myself   | 个人的开发版本               |

1、将develop分支合并到myself分支
{% highlight sh %}
git fetch
git checkout develop
git pull
git checkout myself
git merge develop
git push origin myself	// 将合并后的代码提交到myself分支的远程仓库，此处不用add和commit
{% endhighlight %}

2、git add . 之后，加入了很多不想提交的文件或文件夹。撤销可以用如下命令：
{% highlight sh %}
git rm -r --cached .
{% endhighlight %}
everything back to start point.

3、获取远程分支
{% highlight sh %}
git fetch // 获取远程分支信息获取到本地
// 将远程分支映射到本地命名为 local_branch_name 的一分支
git checkout -b local_branch_name origin/remote_branch_name
{% endhighlight %}

4、撤销单个文件的修改  
修改了两个文件a与b并且没有add和commit，此时这两个文件通过git status -s可以看到M状态，若想单独撤销某一个文件修改，恢复到上一次提交时的状态，可以执行
{% highlight sh %}
git checkout -- [filename]
{% endhighlight %}
即可将filename文件的上一个提交状态检出到当前工作区。

5、初始化提交master分支
{% highlight sh %}
git push git@code.aliyun.com:vincen_gao/percivale-common.git master
{% endhighlight %}