---
layout: post
title: Docker 笔记
categories: server-side
tags: docker
---

# 常用命令
```sh
docker info 					//查看docker状态
docker ps -a					//不加-a参数只能看到正在运行的容器
docker rm	name(or id)			//删除容器
docker rm $(docker ps -a -q)	//删除所有容器
docker start name(or id)		//启动容器
docker restart name(or id)		//重启容器
docker attach	 name(or id)	//附着到正在运行的容器(需要安一下回车)
docker top name(or id)			//查看容器内的进程
docker stats name name(or id)	//查看多个容器的统计信息
docker exec -d name(or id)		//后边跟命令，在后台运行
docker exec -t -i name(or id)	//后边跟命令，交互式运行
docker stop name(or id)			//停止正在运行的容器
docker kill name(or id)			//强制关闭容器
docker inspect name(or id)		//获取更详细的配置信息
docker images -a				//查看所有的镜像，不加-a只能看到可用的镜像
docker rmi id					//删除镜像
docker rmi $(docker images -q)	//删除所有镜像
docker pull ubuntu:12.04		//拉取指定版本的镜像
docker search					//查找镜像
```

## docker run 命令
```sh
docker run --restart=always --name NewName -d -i -t -p 4000:80 ubuntu /bin/bash
```
--name 该参数给容器指定一个名字。  
-i：开启容器的STDIN，-t：为创建的容器分配一个伪tty终端。这两个参数一起使用，才能为容器提供一个交互式shell。  
-d 将容器放在后台运行，成为一个守护进程。  
--restart=always 由于某种错误而导致运行停止运行，通过这个参数可以自动容器。  
-p 4000:80 将docker容器的80端口，映射到真机的4000端口上。

## docker logs 命令
```sh
docker logs name(or id)				//获取容器日志
docker logs -f name(or id)			//监控日志
docker logs --tail 10 name(or id)	//获取最后10条日志
docker logs --tail 0 -f name(or id)	//跟踪最新的日志，而不必读取整个日志文件
docker logs -ft name(or id)			//给日志加上时间戳
```

## docker 创建镜像
```sh
docker build -t friendlyname .  # Create image using this directory's Dockerfile
docker login             		# Log in this CLI session using your Docker credentials
docker tag <image> username/repository:tag  # Tag <image> for upload to registry
docker push username/repository:tag         # Upload tagged image to registry
docker run username/repository:tag          # Run image from a registry

```