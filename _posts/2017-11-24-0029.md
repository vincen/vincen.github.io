---
layout: post
title: TypeScript all in one
categories: FRONTEND
tags: typescript
---

以下内容基于 TypeScript 4.5.2 更新。所有内容都基于`严格模式`。

# 环境与工具

## 构建环境

当对单个文件进行编译时，可以使用下面的命令：

```shell
$ tsc greeter.ts
```

但是，对于工程来说，文件量比较大，不可能单个文件编译。需要使用类似于 `Java` 工程中的 `Maven` 或者 `Gradle` 管理工程。`TypeScript` 提供了原生的工具，配置文件：`tsconfig.json`，类似 `pom.xml` 和 `build.gradle`。

通过如下方式构建工程：

```shell
$ mkdir project_a && cd project_a
$ tsc --init
```

会生成 `tsconfig.json` 文件。

## 代码调试

使用 VSCode 调试 TS 代码需要提前进行配置。下面只说 `vscode` + `ts-node` 进行调试。

使用 `vscode` + `tsc` 见 VSCode 官网，有相关介绍。

### 调试配置

1. 在 `VSCode` debug 界面，配置如下内容：

```json
{
"version": "0.2.0",
 "configurations": [
   {
     "type": "node",
     "request": "launch",
     "name": "调试TS代码",
     // ts-node 命令，作用是：调试时夹在ts-node包（在调试时直接运行ts代码）
     "runtimeArgs": ["-r", "ts-node/register"],
     "args": ["${workspaceFolder}/a.ts"]
   }
 ]
}
```

### 调试时用到的包

注意：原来全局安装的包，在调试时不生效，需要在当前目录安装如下包：

```shell
npm i ts-node typescript
```

# 语法

## 泛型

泛型类指的是实例部分的类型，所以类的静态属性不能使用这个泛型类型。

## 类型推断

推断发生在初始化变量和成员，设置默认参数值和决定函数返回值时。

## 类型兼容性

TypeScript 里的类型兼容性是基于结构子类型的。 

结构类型是一种只使用其成员来描述类型的方式。 它正好与名义（nominal）类型形成对比。

在基于名义类型的类型系统中，数据类型的兼容性或等价性是通过明确的声明和/或类型的名称来决定的。这与结构性类型系统不同，它是基于类型的组成结构，且不要求明确地声明。